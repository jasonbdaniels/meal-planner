---
layout: default
---
{% assign jsSrc = "grocery-list.js" | relative_url %}
<script src="{{ jsSrc }}" charset="utf-8"></script>
<script type="text/javascript">
  function displayRecipeJSON(){
    var list = groceryList.items();

    alert(JSON.stringify(list));
  }

  function addToGroceryList(){
    groceryList.addItems(recipeKey(), {{ page.ingredients | jsonify }});
    updateButtonVisibility();
  }

  function removeFromGroceryList(){
    groceryList.removeItems(recipeKey());
    updateButtonVisibility();
  }

  function recipeKey(){
    return "{{ page.title | slugify }}";
  }

  function updateButtonVisibility(){
    var list = groceryList.items();
    var listRecipes = Object.keys(list);
    var inList = listRecipes.indexOf(recipeKey()) != -1

    document.getElementById("minusButton").hidden = !inList
    document.getElementById("addButton").hidden = inList
  }
</script>

<h1>{{ page.title }}</h1>

<span>Grocery List</span>
<button id="addButton" onclick="addToGroceryList(); displayRecipeJSON();" type="button">+</button>
<button id="minusButton" onclick="removeFromGroceryList(); displayRecipeJSON();" type="button">-</button>

<script type="text/javascript">
  updateButtonVisibility();
</script>

<h2>Ingredients</h2>
<ul>{% for ingredient in page.ingredients %}
  <li>{{ ingredient }}</li>
{% endfor %}</ul>

{% if page.instructions.size > 0 %}
<h2>Instructions</h2>
<ol>{% for instruction in page.instructions %}
  <li>{{ instruction }}</li>
{% endfor %}</ol>
{% endif %}

{% assign content_size = page.content | lstrip | rstrip | size %}
{% if content_size > 0 %}
<hr><br>

{{ page.content }}
{% endif %}
